form(name="jb-post-form")
    .jb-form-ct
        .form-horizontal
            .form-group
                label.col-sm-2.control-label {{'Create date' | get-text}}
                .col-sm-10
                    .form-control-static
                        display-date(:value="post.createDate")
            .form-group
                label.col-sm-2.control-label {{'Update date' | get-text}}
                .col-sm-10
                    .form-control-static
                        display-date(:value="post.updateDate")
            .form-group
                label.col-sm-2.control-label {{'Publication date' | get-text}}
                .col-sm-10
                    .form-control-static
                        display-date(:value="post.pubDate")
            .form-group
                label.col-sm-2.control-label {{'Title' | get-text}}
                .col-sm-10
                    input.form-control(type="text", required, :placeholder="'Enter post title' | get-text", v-model.lazy="post.title")
            .form-group
                label.col-sm-2.control-label {{'Title image' | get-text}}
                .col-sm-8(:class="{'util-zindex-100': titleImageSelectOpen}")
                    .selected-avatar-ct(v-if="post.titleImg")
                        img.selected-avatar(:src="post.titleImg.url", :alt="post.titleImg.metadata.originalName")
                        .selected-avatar-desc
                            .selected-avatar-title {{ post.titleImg.metadata.originalName }}
                            display-date(:value="post.titleImg.uploadDate")
                            div
                                small {{ post.titleImg.metadata.description }}
                    multiselect.multiselect-avatar(
                    v-model="post.titleImg",
                    :placeholder="'Select title image' | get-text",
                    label="filename",
                    track-by="_id",
                    :options="availableTitleImages",
                    :option-height="74",
                    :custom-label="getFileInfoLabel",
                    :show-labels="false",
                    :multiple="false",
                    :searchable="false",
                    :hide-selected="true",
                    :allow-empty="true",
                    :loading="titleImagesLoading",
                    @open="onTitleImageSelectOpen",
                    @close="onTitleImageSelectClose"
                    )
                        template(slot="beforeList", scope="props")
                            button.btn.btn-link.btn-in-select(type="button", @click="onAddTitleImageClick")
                                i.fa.fa-plus.fa-fw(aria="hidden")
                                span._margin-5._left {{'Add new one' | get-text}}
                        template(slot="option", scope="props")
                            .option__avatar-ct
                                img.option__avatar-image(:src="props.option.url", :alt="props.option.metadata.originalName")
                                .option__avatar-desc
                                    .option__avatar-title {{ props.option.metadata.originalName }}
                                    display-date(:value="props.option.uploadDate")
                                    div
                                        small {{ props.option.metadata.description }}
            .form-group
                label.col-sm-2.control-label {{'Tags' | get-text}}
                .col-sm-10(:class="{'util-zindex-100': tagSelectOpen}")
                    multiselect(
                    v-model="post.tags",
                    :tag-placeholder="'Add as new tag' | get-text",
                    :placeholder="'Select or add tags' | get-text",
                    :options="availableTags",
                    :multiple="true",
                    :taggable="true",
                    @tag="addPostTag",
                    :loading="tagsIsLoading",
                    @search-change="onTagSelectSearch",
                    @open="onTagSelectOpen",
                    @close="onTagSelectClose"
                    )
            .form-group
                label.col-sm-2.control-label {{'Post content type' | get-text}}
                .col-sm-10
                    label.radio-inline
                        input(type="radio", value="MD", v-model="post.contentType")
                        .
                            {{'Markdown' | get-text}}
                    label.radio-inline
                        input(type="radio", value="HTML", v-model="post.contentType")
                        .
                            {{'HTML' | get-text}}
            .form-group
                label.col-sm-2.control-label {{'Post brief' | get-text}}
                .col-sm-10
                    ace-editor.form-control.jb-ace-editor-brief(id="jb-post-brief-ace-editor", :value.sync="post.brief", :config="{mode: post.contentType, theme: 'Chrome'}")
            .form-group
                label.col-sm-2.control-label {{'Post content' | get-text}}
                .col-sm-10
                    div
                        label.radio-inline
                            input(type="radio", value="EDIT", v-model="contentMode")
                            .
                                {{'Edit' | get-text}}
                        label.radio-inline
                            input(type="radio", value="PREVIEW", v-model="contentMode")
                            .
                                {{'Preview' | get-text}}
                    ace-editor.form-control.jb-ace-editor-content(v-if="contentMode==='EDIT'", id="jb-post-content-ace-editor", :value.sync="post.content", :config="{mode: post.contentType, theme: 'Chrome'}")
                    markdown-preview.form-control(v-if="contentMode==='PREVIEW' && post.contentType==='MD'", :markdown="post.content")
                    .form-control.jb-content-preview(v-if="contentMode==='PREVIEW' && post.contentType==='HTML'", v-html="post.content")
        .row.form-after-buttons-row
            .col-sm-12.text-right
                button.btn.btn-primary(type="button", @click="onSubmitButtonClick")
                    i.fa.fa-upload.fa-fw(aria="hidden")
                    span {{'Save' | get-text}}
    vuedals
